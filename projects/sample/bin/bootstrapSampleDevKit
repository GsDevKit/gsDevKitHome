#! /bin/bash
#=========================================================================
# Copyright (c) 2015 GemTalk Systems, LLC <dhenrich@gemtalksystems.com>.
#=========================================================================

usage() {
  cat <<HELP
USAGE: $(basename $0) [-h] 
Bootstrap the Sample project. Clone the set of GitHub projects used by the
Sample project. Set up the tODe and GsDevKitHome infrastructure for the
Sample project.

OPTIONS
  -h show usage

EXAMPLES
  $(basename $0) -h
  $(basename $0)

HELP
}

set -e # exit on error
if [ "${GS_HOME}x" = "x" ] ; then
  echo "the GS_HOME environment variable needs to be defined"; exit 1
fi
source ${GS_HOME}/bin/shFunctions

getOpts_help $@ #parse standard (-h) options

# clone git repositories
cd /opt/git
if [ ! -d glass ]; then
  git clone git@github.com:glassdb/glass.git
fi
if [ ! -d Grease ]; then
  git clone git@github.com:GsDevKit/Grease.git
fi
if [ ! -d metacello-work ]; then
  git clone git@github.com:dalehenrich/metacello-work.git
fi
if [ ! -d sample ]; then
  git clone git@github.com:dalehenrich/sample.git
  cd sample
  git checkout gsDevKitHome
  cd ..
fi
if [ ! -d Seaside31 ]; then
  git clone git@github.com:GsDevKit/Seaside31.git
fi
if [ ! -d tode ]; then
  git clone git@github.com:dalehenrich/tode.git
  cd tode
  git checkout dev
  cd ..
fi
if [ ! -d zinc ]; then
  git clone git@github.com:GsDevKit/zinc.git
fi

# copy project entries to /sys/local/projects directory
cp $GS_HOME/projects/sample/projects/* $GS_HOME/tode/sys/local/projects

